"use strict";const searchButton=document.querySelector(".js-search-form__button");searchButton.addEventListener("click",readInput);let results=[],favs=[];function readInput(e){e.preventDefault();let t=document.querySelector(".js-search-form__input").value;t?makeRequest(t):showWarningMessage()}function makeRequest(e){fetch("http://api.tvmaze.com/search/shows?q="+e).then((function(e){return e.json()})).then((function(e){results=e,paintResults()}))}function paintResults(){const e=document.querySelector(".js-results-list");for(const t of results){const s=document.createElement("li");e.appendChild(s),s.setAttribute("class","js-results-list__showcard"),s.setAttribute("id",t.show.id),addImage(t,s);const n=document.createElement("h3");s.appendChild(n),n.innerHTML=t.show.name}listenClicksOnPaintedResults()}function addImage(e,t){const s=document.createElement("img");t.appendChild(s),e.show.image?s.src=e.show.image.medium:s.src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV"}function showWarningMessage(){document.querySelector(".warning-text").innerHTML="Realiza una bÃºsqueda para comenzar"}function listenClicksOnPaintedResults(){const e=document.querySelectorAll(".js-results-list__showcard");for(const t of e)t.addEventListener("click",saveAsFav)}function saveAsFav(e){const t=e.currentTarget.id,s=document.getElementById(t);s.classList.toggle("fav-show");const n=results.find(e=>e.show.id===parseInt(s.id));favs.push(n),localStorage.setItem("favShows",JSON.stringify(favs)),paintFavShowList()}function paintFavShowList(){const e=JSON.parse(localStorage.getItem("favShows"));console.log(e);const t=document.querySelector(".js-favs-list");t.innerHTML="";for(let s=0;s<e.length;s++){const n=document.createElement("li");t.appendChild(n),n.setAttribute("class","js-fav-list__showcard"),addFavsImage(e[s],n);const a=document.createElement("h3");n.appendChild(a),a.innerHTML=e[s].show.name}}function addFavsImage(e,t){const s=document.createElement("img");t.appendChild(s),e.show.image?s.src=e.show.image.medium:s.src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV"}